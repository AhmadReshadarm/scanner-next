import Link from 'next/link';
import { useRouter } from 'next/router';
import { useEffect, useState } from 'react';
import { useCopyToClipboard } from './helpers';
import styles from '../../styles/shareToSocial.module.css';
import color from 'components/store/lib/ui.colors';
import {
  VKShareButton,
  WhatsappShareButton,
  TelegramShareButton,
  TwitterShareButton,
} from 'next-share';
type Props = {
  title?: string;
};

const ShareToSocialContent: React.FC<Props> = ({ title }) => {
  const router = useRouter();
  const [isCopied, setCopied, copy] = useCopyToClipboard();
  const [baseUrl, setBaseUrl] = useState('');

  useEffect(() => {
    setBaseUrl(window.location.origin);
  }, []);

  return (
    <>
      <li
        onTouchStart={() => {
          copy(`${baseUrl}${router.asPath}`);
          setTimeout(() => {
            setCopied(false);
          }, 800);
        }}
        onClick={() => {
          copy(`${baseUrl}${router.asPath}`);
          setTimeout(() => {
            setCopied(false);
          }, 800);
        }}
      >
        <span style={{ width: '20px' }}>
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M13 0C13.7956 0 14.5587 0.316071 15.1213 0.87868C15.6839 1.44129 16 2.20435 16 3V4H17C17.7956 4 18.5587 4.31607 19.1213 4.87868C19.6839 5.44129 20 6.20435 20 7V17C20 17.7956 19.6839 18.5587 19.1213 19.1213C18.5587 19.6839 17.7956 20 17 20H7C6.20435 20 5.44129 19.6839 4.87868 19.1213C4.31607 18.5587 4 17.7956 4 17V16H3C2.20435 16 1.44129 15.6839 0.87868 15.1213C0.316071 14.5587 0 13.7956 0 13V3C0 2.20435 0.316071 1.44129 0.87868 0.87868C1.44129 0.316071 2.20435 0 3 0H13ZM18 7C18 6.73478 17.8946 6.48043 17.7071 6.29289C17.5196 6.10536 17.2652 6 17 6H16V13C16 13.7956 15.6839 14.5587 15.1213 15.1213C14.5587 15.6839 13.7956 16 13 16H9.003C8.87168 16.0002 8.7416 15.9745 8.6202 15.9245C8.4988 15.8744 8.38845 15.8009 8.29545 15.7082C8.20246 15.6154 8.12863 15.5053 8.07819 15.3841C8.02776 15.2628 8.0017 15.1328 8.0015 15.0015C8.0013 14.8702 8.02697 14.7401 8.07705 14.6187C8.12712 14.4973 8.20061 14.387 8.29333 14.294C8.38605 14.201 8.49618 14.1271 8.61743 14.0767C8.73868 14.0263 8.86868 14.0002 9 14H13C13.2652 14 13.5196 13.8946 13.7071 13.7071C13.8946 13.5196 14 13.2652 14 13V3C14 2.73478 13.8946 2.48043 13.7071 2.29289C13.5196 2.10536 13.2652 2 13 2H2.986C2.72078 2 2.46643 2.10536 2.27889 2.29289C2.09136 2.48043 1.986 2.73478 1.986 3V13C1.986 13.2652 2.09136 13.5196 2.27889 13.7071C2.46643 13.8946 2.72078 14 2.986 14H5C5.26522 14 5.51957 14.1054 5.70711 14.2929C5.89464 14.4804 6 14.7348 6 15V17C6 17.2652 6.10536 17.5196 6.29289 17.7071C6.48043 17.8946 6.73478 18 7 18H17C17.2652 18 17.5196 17.8946 17.7071 17.7071C17.8946 17.5196 18 17.2652 18 17V7Z"
              fill="#707F8D"
            />
          </svg>
        </span>
        <button className={styles.copy_url_btn}>
          <span style={{ display: !isCopied ? 'flex' : 'none' }}>
            Скопировать ссылку
          </span>
          <span
            style={{
              color: color.textBase,
              display: isCopied ? 'flex' : 'none',
            }}
          >
            Ссылка скопирована
          </span>
        </button>
      </li>
      <li>
        <VKShareButton
          style={{
            display: 'flex',
            flexDirection: 'row',
            justifyContent: 'flex-start',
            alignItems: 'center',
            gap: '15px',
          }}
          url={`${baseUrl}${router.asPath}`}
        >
          <span>
            <svg
              width="22"
              height="14"
              viewBox="0 0 22 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.982 14C4.466 14 0.18 8.745 0 0H3.765C3.889 6.418 6.665 9.137 8.863 9.698V0H12.409V5.536C14.579 5.297 16.861 2.775 17.63 0H21.176C20.8874 1.43539 20.3097 2.79702 19.478 4.002C18.6521 5.19903 17.5879 6.21255 16.352 6.979C17.7316 7.6794 18.9462 8.66561 19.915 9.872C20.8908 11.0872 21.6011 12.4934 22 14H18.097C17.7403 12.6931 17.0089 11.5192 15.993 10.623C14.9872 9.73579 13.7391 9.16954 12.409 8.997V14H11.982V14Z"
                fill="#707F8D"
              />
            </svg>
          </span>
          <span className={styles.social_name}>ВКонтакте</span>
        </VKShareButton>
      </li>
      <li>
        <Link href="/" prefetch={false}>
          <WhatsappShareButton
            style={{
              display: 'flex',
              flexDirection: 'row',
              justifyContent: 'flex-start',
              alignItems: 'center',
              gap: '15px',
            }}
            url={`${baseUrl}${router.asPath}`}
            title={title}
            separator=":"
          >
            <span>
              <svg
                width="25"
                height="25"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M18.4989 14.3653C18.4502 14.3419 16.6277 13.4444 16.3038 13.3279C16.1716 13.2804 16.0299 13.2341 15.8793 13.2341C15.6332 13.2341 15.4265 13.3567 15.2654 13.5976C15.0834 13.8682 14.5322 14.5125 14.3619 14.7049C14.3397 14.7303 14.3093 14.7607 14.2911 14.7607C14.2748 14.7607 13.9928 14.6445 13.9074 14.6074C11.9523 13.7582 10.4683 11.7159 10.2648 11.3715C10.2357 11.322 10.2345 11.2995 10.2342 11.2995C10.2414 11.2733 10.3071 11.2074 10.3411 11.1733C10.4403 11.0751 10.5479 10.9457 10.6519 10.8204C10.7012 10.7611 10.7506 10.7017 10.799 10.6457C10.95 10.47 11.0172 10.3337 11.0951 10.1757L11.136 10.0936C11.3262 9.71563 11.1637 9.39664 11.1112 9.29364C11.0681 9.20744 10.2985 7.35013 10.2167 7.155C10.02 6.68414 9.75998 6.4649 9.39869 6.4649C9.36517 6.4649 9.39869 6.4649 9.25811 6.47083C9.08692 6.47805 8.1547 6.60078 7.74252 6.8606C7.30543 7.13617 6.56598 8.01458 6.56598 9.55938C6.56598 10.9497 7.44829 12.2625 7.8271 12.7617C7.83652 12.7743 7.8538 12.7999 7.87889 12.8366C9.32962 14.9552 11.1381 16.5254 12.9715 17.2578C14.7365 17.9628 15.5723 18.0443 16.0475 18.0443C16.0476 18.0443 16.0476 18.0443 16.0476 18.0443C16.2472 18.0443 16.4071 18.0286 16.548 18.0147L16.6375 18.0062C17.2472 17.9522 18.5872 17.2578 18.892 16.4108C19.1321 15.7437 19.1954 15.0148 19.0356 14.7503C18.9262 14.5704 18.7377 14.4799 18.4989 14.3653Z"
                  fill="#707F8D"
                />
                <path
                  d="M12.7222 0C5.95137 0 0.44292 5.46705 0.44292 12.1869C0.44292 14.3604 1.02458 16.4879 2.12644 18.3499L0.0174331 24.5711C-0.0218526 24.6871 0.00736815 24.8153 0.0931637 24.9027C0.155096 24.9659 0.239105 25 0.324901 25C0.357774 25 0.390891 24.995 0.423196 24.9847L6.91021 22.9234C8.68538 23.8718 10.6917 24.3725 12.7222 24.3725C19.4924 24.3726 25.0002 18.9061 25.0002 12.1869C25.0002 5.46705 19.4924 0 12.7222 0ZM12.7222 21.8339C10.8115 21.8339 8.96095 21.2822 7.3702 20.2384C7.31671 20.2032 7.25461 20.1852 7.19211 20.1852C7.15908 20.1852 7.12596 20.1903 7.09374 20.2005L3.84414 21.2334L4.89317 18.1386C4.9271 18.0384 4.91013 17.9279 4.84763 17.8425C3.63627 16.1873 2.99593 14.2317 2.99593 12.1869C2.99593 6.86688 7.35908 2.53864 12.7221 2.53864C18.0844 2.53864 22.4471 6.86688 22.4471 12.1869C22.4472 17.5063 18.0846 21.8339 12.7222 21.8339Z"
                  fill="#707F8D"
                />
              </svg>
            </span>
            <span className={styles.social_name}>Whatsapp</span>
          </WhatsappShareButton>
        </Link>
      </li>
      <li>
        <Link href="/" prefetch={false}>
          <TelegramShareButton
            style={{
              display: 'flex',
              flexDirection: 'row',
              justifyContent: 'flex-start',
              alignItems: 'center',
              gap: '15px',
            }}
            url={`${baseUrl}${router.asPath}`}
            title={title}
          >
            <span>
              <svg
                width="23"
                height="21"
                viewBox="0 0 23 21"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M19.874 3.00199C19.8467 2.99772 19.8188 3.00191 19.794 3.01399L2.08999 10.646C1.92299 10.723 1.99699 10.875 2.20699 10.953L5.33399 12.057C5.45783 12.1007 5.57184 12.1684 5.66951 12.2562C5.76719 12.344 5.84661 12.4502 5.90326 12.5687C5.9599 12.6871 5.99265 12.8156 5.99964 12.9468C6.00663 13.0779 5.98772 13.2092 5.94399 13.333C5.90026 13.4568 5.83257 13.5708 5.74477 13.6685C5.65698 13.7662 5.55081 13.8456 5.43232 13.9023C5.19303 14.0167 4.91809 14.0313 4.66799 13.943L1.58099 12.853C-0.37001 12.325 -0.57501 9.61699 1.29699 8.80999L19.003 1.17799C20.623 0.477989 22.345 1.92599 21.942 3.64099L18.25 19.343C18.1715 19.6777 18.0138 19.9886 17.7901 20.2497C17.5664 20.5107 17.2833 20.7141 16.9646 20.8429C16.6459 20.9717 16.3009 21.022 15.9586 20.9897C15.6164 20.9573 15.2869 20.8432 14.998 20.657L8.99599 16.842C8.74345 16.6783 8.52812 16.4634 8.36396 16.2112C8.19979 15.959 8.09045 15.6751 8.04303 15.3779C7.99561 15.0808 8.01115 14.7769 8.08867 14.4862C8.16618 14.1954 8.30393 13.9241 8.49299 13.69L12.243 9.34699C12.3277 9.24407 12.4321 9.15911 12.5501 9.09712C12.668 9.03513 12.7972 8.99734 12.93 8.98599C13.0628 8.97464 13.1966 8.98995 13.3234 9.03102C13.4501 9.0721 13.5675 9.1381 13.6684 9.22516C13.7693 9.31221 13.8518 9.41856 13.911 9.53796C13.9703 9.65736 14.005 9.78739 14.0133 9.92042C14.0215 10.0534 14.0031 10.1868 13.9591 10.3126C13.9151 10.4384 13.8464 10.5541 13.757 10.653L10.037 14.963C10.0174 14.9955 10.0111 15.0342 10.0193 15.0713C10.0275 15.1083 10.0496 15.1408 10.081 15.162L16.081 18.976C16.165 19.03 16.279 18.986 16.303 18.886L19.995 3.18399C20.0027 3.15708 20.002 3.12849 19.993 3.10199C19.9834 3.07626 19.9672 3.0535 19.946 3.03599C19.9254 3.01858 19.9005 3.00686 19.874 3.00199V3.00199Z"
                  fill="#707F8D"
                />
              </svg>
            </span>
            <span className={styles.social_name}>Telegram</span>
          </TelegramShareButton>
        </Link>
      </li>
      <li>
        <Link href="/" prefetch={false}>
          <TwitterShareButton
            style={{
              display: 'flex',
              flexDirection: 'row',
              justifyContent: 'flex-start',
              alignItems: 'center',
              gap: '15px',
            }}
            url={`${baseUrl}${router.asPath}`}
            title={title}
          >
            <span>
              <svg
                width="22"
                height="18"
                viewBox="0 0 22 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M22 2.131C21.1767 2.49792 20.303 2.73895 19.408 2.846C20.3521 2.27613 21.0572 1.38274 21.392 0.332C20.5069 0.861007 19.5375 1.23378 18.526 1.434C18.1049 0.98147 17.5951 0.620581 17.0284 0.373855C16.4616 0.12713 15.8501 -0.000136067 15.232 1.09168e-07C12.74 1.09168e-07 10.72 2.035 10.72 4.545C10.72 4.9 10.76 5.245 10.836 5.579C7.084 5.389 3.759 3.579 1.533 0.831C1.13264 1.52556 0.922252 2.31331 0.923 3.115C0.923 4.692 1.72 6.084 2.93 6.898C2.21293 6.87474 1.51194 6.6796 0.886 6.329V6.388C0.883464 7.43414 1.24237 8.44905 1.90201 9.26103C2.56165 10.073 3.48152 10.6322 4.506 10.844C3.84149 11.025 3.1444 11.0517 2.468 10.922C2.75312 11.8225 3.31323 12.611 4.06961 13.1767C4.826 13.7424 5.74065 14.0569 6.685 14.076C5.75043 14.816 4.67844 15.3635 3.531 15.6867C2.38356 16.0099 1.18343 16.1025 0 15.959C2.06038 17.2934 4.46324 18.0023 6.918 18C15.221 18 19.761 11.077 19.761 5.072C19.761 4.877 19.756 4.68 19.747 4.485C20.6308 3.84145 21.3931 3.04571 21.998 2.135L22 2.13V2.131Z"
                  fill="#707F8D"
                />
              </svg>
            </span>
            <span className={styles.social_name}>Twitter</span>
          </TwitterShareButton>
        </Link>
      </li>
    </>
  );
};

export default ShareToSocialContent;
